{"is_source_file": true, "format": "TypeScript", "description": "This file contains API-related functions and React hooks for handling ride bookings, ride status, and user history within a taxi booking web frontend. It defines interfaces, environment-based URL retrieval, feature flag checks, and hooks for creating and fetching ride data.", "external_files": ["../components/BookingForm", "../components/RideCard"], "external_methods": ["React.useState", "React.useEffect", "fetch"], "published": ["RideStatus", "getApiBaseUrl", "useCreateBooking", "useGetRideStatus", "useGetHistory"], "classes": [], "methods": [{"name": "export function getApiBaseUrl(): string { getApiBaseUrl", "description": "Returns the base URL for API requests, checking environment variables and providing a fallback URL.", "scope": "", "scopeKind": ""}, {"name": "function isMockApi(): boolean { isMockApi", "description": "Determines whether the API should operate in mock mode based on environment variables and window properties.", "scope": "", "scopeKind": ""}, {"name": "export function useCreateBooking() { useCreateBooking", "description": "React hook that provides a function to create a new booking, with mock or real API logic, and tracks loading/error states.", "scope": "", "scopeKind": ""}, {"name": "export function useGetRideStatus(rideId: string | null) { useGetRideStatus", "description": "React hook that fetches and manages the status of a specific ride based on ride ID, with support for mock mode.", "scope": "", "scopeKind": ""}, {"name": "export function useGetHistory() { useGetHistory", "description": "React hook that fetches and manages the user's booking history, with support for mock data.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "setTimeout", "setState", "process.env.NEXT_PUBLIC_API_BASE", "process.env.NEXT_PUBLIC_BACKEND_URL", "process.env.NEXT_PUBLIC_FEATURE_FLAGS"], "search-terms": ["api.ts", "React hooks", "ride status", "booking creation", "history fetch", "mock API", "API URL", "environment variables", "ride booking", "fetch requests"], "state": 2, "file_id": 19, "knowledge_revision": 50, "git_revision": "", "revision_history": [{"43": ""}, {"48": ""}, {"49": ""}, {"50": ""}], "ctags": [{"_type": "tag", "name": "RideStatus", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^export interface RideStatus {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "createBooking", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const createBooking = async (formData: BookingData): Promise<(BookingData & { id: string; stat/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "driver", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  driver: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "dropoff", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  dropoff: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "eta", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  eta: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "featureFlags", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^    const featureFlags = process.env.NEXT_PUBLIC_FEATURE_FLAGS$/", "language": "TypeScript", "kind": "constant", "scope": "isMockApi", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^export function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "history", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [history, setHistory] = React.useState<Ride[]>([]);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  id: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "isMockApi", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^function isMockApi(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(true);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  location: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "pickup", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  pickup: string;$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^      const res = await fetch(`${getApiBaseUrl()}\\/bookings`, {$/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [error, setError] = React.useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "setHistory", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [history, setHistory] = React.useState<Ride[]>([]);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useCreateBooking", "scopeKind": "function"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [loading, setLoading] = React.useState<boolean>(true);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetHistory", "scopeKind": "function"}, {"_type": "tag", "name": "setStatus", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [status, setStatus] = React.useState<RideStatus | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  const [status, setStatus] = React.useState<RideStatus | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useGetRideStatus", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^  status: \"pending\" | \"completed\" | \"in_progress\" | \"cancelled\";$/", "language": "TypeScript", "kind": "property", "scope": "RideStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "useCreateBooking", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^export function useCreateBooking() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useGetHistory", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^export function useGetHistory() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useGetRideStatus", "path": "/home/kavia/workspace/code-generation/ridebooker-206746-206756/taxi_booking_frontend/src/lib/api.ts", "pattern": "/^export function useGetRideStatus(rideId: string | null) {$/", "language": "TypeScript", "kind": "function"}], "hash": "955de462347d743a8f7d66253e14add8", "format-version": 4, "code-base-name": "taxi_booking_frontend", "filename": "taxi_booking_frontend/src/lib/api.ts", "fields": [{"name": "export interface RideStatus {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "driver: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "dropoff: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "eta: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "id: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "location: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "pickup: string;", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "status: \"pending\" | \"completed\" | \"in_progress\" | \"cancelled\";", "scope": "RideStatus", "scopeKind": "interface", "description": "unavailable"}]}